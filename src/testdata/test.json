// Set to 00:00:00:000 today
var today = new Date(),
	day = 1000 * 60 * 60 * 1,
	map = Highcharts.map,
	dateFormat = Highcharts.dateFormat,
	series,
	cars;
// Set to 00:00:00:000 today
today.setUTCHours(0);
today.setUTCMinutes(0);
today.setUTCSeconds(0);
today.setUTCMilliseconds(0);
today = today.getTime();
cars = [{
	model: 'Nissan Leaf',
	current: 0,
	deals: [{
		rentedTo: 'Lisa Star',
		from: today - 1 * day,
		to: today + 2 * day
	}, {
		rentedTo: 'Shane Long',
		from: today - 3 * day,
		to: today - 2 * day
	}, {
		rentedTo: 'Jack Coleman',
		from: today + 5 * day,
		to: today + 6 * day
	}]
}, {
	model: 'Jaguar E-type',
	current: 0,
	deals: [{
		rentedTo: 'Martin Hammond',
		from: today - 2 * day,
		to: today + 1 * day
	}, {
		rentedTo: 'Linda Jackson',
		from: today - 2 * day,
		to: today + 1 * day
	}, {
		rentedTo: 'Robert Sailor',
		from: today + 2 * day,
		to: today + 6 * day
	}]
}, {
	model: 'Volvo V60',
	current: 0,
	deals: [{
		rentedTo: 'Mona Ricci',
		from: today + 0 * day,
		to: today + 3 * day
	}, {
		rentedTo: 'Jane Dockerman',
		from: today + 3 * day,
		to: today + 4 * day
	}, {
		rentedTo: 'Bob Shurro',
		from: today + 6 * day,
		to: today + 8 * day
	}]
}, {
	model: 'Volkswagen Golf',
	current: 0,
	deals: [{
		rentedTo: 'Hailie Marshall',
		from: today - 1 * day,
		to: today + 1 * day
	}, {
		rentedTo: 'Morgan Nicholson',
		from: today - 3 * day,
		to: today - 2 * day
	}, {
		rentedTo: 'William Harriet',
		from: today + 2 * day,
		to: today + 3 * day
	}]
}, {
	model: 'Peugeot 208',
	current: 0,
	deals: [{
		rentedTo: 'Harry Peterson',
		from: today - 1 * day,
		to: today + 2 * day
	}, {
		rentedTo: 'Emma Wilson',
		from: today + 3 * day,
		to: today + 4 * day
	}, {
		rentedTo: 'Ron Donald',
		from: today + 5 * day,
		to: today + 6 * day
	}]
}];
// Parse car data into series.
series = cars.map(function (car, i) {
	var data = car.deals.map(function (deal) {
		return {
			id: 'deal-' + i,
			rentedTo: deal.rentedTo,
			start: deal.from,
			end: deal.to,
			y: i
		};
	});
	return {
		name: car.model,
		data: data,
		current: car.deals[car.current],
		borderRadius: 0,
		pointPadding: 0,
		groupPadding: 0,
		colorByPoint: false,
		color: "rgba(255,0,0,1)",
		dataLabels: {
			enabled: false,
			formatter: function(){
				return this.key;
			},
		},
		borderWidth: 0,
		tickmarkPlacement:'on',
		stack: 0,
		grouping: false,
	};
});
console.log(series)
series[0].data[1].y = 4
function create() {
	return {
		chart: {
			backgroundColor: 'rgba(0,0,0,0)',
			zoomType: 'x',
			height: '50%'
		},
		legend : {
			enabled: true,
			align : 'center',
			verticalAlign : 'bottom',
			y : 0,
			floating : false,
			itemStyle: {
				color: "#C1FFC1",
				fontWeight: 'bold'
			},
			backgroundColor: '#303030',
			// borderColor: '#ffffff',
			borderWidth: 2,
			borderRadius: 0,
		},
		series: series,
		title: {
			text: 'Car Rental Schedule',
			style: {
				fontSize: '16px',
				fontWeight: 'bold',
				color: "white",
			},
		},
		tooltip: {
			pointFormat: '<span>Rented To: {point.rentedTo}</span><br/><span>From: {point.start:%e. %b}</span><br/><span>To: {point.end:%e. %b}</span>'
		},
		xAxis: [{
			type: 'datetime',
			grid: false,
			currentDateIndicator: false,
			labels: {
				format: undefined,
				style: {
					color: "white",
				},
			},
			style: {
				fontSize: '16px',
				fontWeight: 'bold',
			},
			color: "white",
		}],
		yAxis: {
			labels: {
				userHTML: true,
				style: {
					color: "white",
				},
			},
			// gridLineWidth: 0,
			type: 'category',
			grid: {
				columns: [
					{
						title: {
							text: '日期',
							style: {
								fontSize: '16px',
								fontWeight: 'bold',
								color: "white",
							},
						},
						categories: map(series, function (s) {
							return dateFormat('%e. %b', s.current.to);
						})
					}],
				maxPadding: 0,
				staticScale:100,
			}
		},
		credits: {
			enabled: false,
		},
	}
}
Highcharts.ganttChart('container', create());
console.log(create());